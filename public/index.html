<!doctype html>
<html lang="en" id="ng-app" ng-app="evewt">
<head>
    <meta charset="utf-8">
    <title>Nemesis</title>
    <script src="js/angular.js"></script>
    <script src="js/controllers.js"></script>
	<script src="js/API.js"></script>
	<script src="js/EveIGB.js"></script>
	<link rel="stylesheet" type="text/css" href="style/index.css" />
</head>
<body onload='CCPEVE.requestTrust(location.protocol + "//" + location.host + "/*")' ng-controller="wt-list">
<h1>Hello {{me.characterName ? me.characterName : 'Pilot'}}, welcome to Thomions' Waitlist Managing Tool!</h1>

<p>Share this waitlist with this link:
    <a id="waitlist-link" href="{{window.location.href}}">{{window.location.href}}</a>
</p>
<div>
	<a href="api/auth">
		<img title="EVE SSO" src="img/EVESSO_SBLACK.png"/>
	</a>
	<input name="remember me" type="checkbox" ng-model="remeberMe">
	<span>remeber me</span>
</div>
<div ng-class="{hidden: !authenticated}">
	<button ng-click="newWaitlist()">Create new waitlist</button>
</div>
<div id="xup" ng-class="{hidden: !authenticated}">
    <input type="text" name="fitting" placeholder="paste ship fitting here" ng-model="shipDNA" required>
    <button ng-click="postFit()">x up!</button>
</div>
<div  ng-class="{hidden: authenticated}">
	Please log in via EVE Single-Sing-On.
</div>
<ol>
    <li ng-repeat="item in waitlistVO.waitlist">
        <div id="wrapper" class="float-container">
			<div>
				<img title="{{item.characterName}}" src="https://image.eveonline.com/Character/{{item.characterId}}_64.jpg" ng-click="showCharInfo(item)"/>
			</div>
			<div>
				<div>
					<img title="{{item.corporationName}}"
						 src="https://image.eveonline.com/Corporation/{{item.corporationId}}_32.png"
						 ng-click="showCorporation(item)"/>
				</div>
				<div ng-class="{hidden: !item.allianceId}">
					<img title="{{item.allianceName}}"
						 src="https://image.eveonline.com/Alliance/{{item.allianceId}}_32.png"
						 ng-click="showAlliance(item)"/>
				</div>
				<div ng-class="{hidden: item.allianceId}" style="width: 32px;height: 32px">
					<!-- DUMMY -->
				</div>
			</div>

			<div>
				<img title="{{item.shipName}}" src="https://image.eveonline.com/Render/{{item.shipType}}_64.png" ng-click="showFitting(item)"/>
			</div>
			<div>
				<img title="send fleetinvite" src="img/add-user.png" width="64" ng-click="fleetInvite(item)"/>
			</div>
			<div>
				<img title="remove from list" src="img/close.png" width="64" ng-click="removeItem(item)"/>
			</div>
        </div>
		<p>{{item.characterName}}</p>
    </li>
</ol>
<div id="how">
	<div id="how-label">How does it work?</div>
	<div id="how-create" class="h4">Create new Waitlist</div>
	<div class="p">
		By opening this page in the Eve IGB you
		already created a waitlist belonging to yourself, you
		can start sharing it. Others can only find it via your link.
	</div>
	<div id="how-share" class="h4">Share your waitlist</div>
	<div class="p">
		By posting the link in chat you can get
		other player to place themselves in your waitlist.
		You can paste a fit by posting it in chat, right-click
		the posted message, click 'copy' and paste the entire line
		in the box hinting 'paste ship fitting here'. By clicking 'ready for fleet'
		your fitting will be submitted and if everything was successful you should
		see yourself in the waitlist.
	</div>
	<div id="how-cool" class="h4">Cool Features</div>
	<div class="p">
		Have you tried clicking on the awesome player portrait?
		Ever clicked on the ship render?
	</div>
	<div id="how-css" class="h4">Are you a CSS wizard and want to help?</div>
	<div class="p">
		The page needs some design love :)
	</div>
</div>

</body>
</html>